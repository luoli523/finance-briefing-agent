# 美元与利率环境模块

## 📋 功能概述

本模块在简报的第一部分（核心股票池表现）中新增了**美元与利率环境**子版块，提供美元指数、美债收益率和主要货币对的实时数据与深度分析。

## 🎯 包含内容

### 1. 💵 美元指数 (DXY)
- **实时价格**：美元指数当前点位
- **涨跌幅**：日内变化百分比
- **趋势判断**：走强/走弱/持稳
- **水平评估**：强势/中性/弱势
- **市场影响**：对股市、大宗商品、新兴市场的影响分析

### 2. 📊 美债收益率
覆盖多个期限的国债收益率：
- **3个月期** (^IRX)
- **2年期** (^/TNX)
- **5年期** (^FVX)
- **10年期** (^TNX)
- **30年期** (^TYX)

#### 深度分析内容：
- **收益率曲线形态**：
  - 正常/倒挂/平坦/陡峭
  - 2年期-10年期利差
  - 10年期-30年期利差
  - 曲线形态解读

- **波动性分析**：
  - 波动水平（低/中/高）
  - 波动性描述与影响

- **市场含义**：
  - 融资成本影响
  - 利率趋势对不同资产的影响
  - 收益率曲线信号解读
  - 实际利率考量

- **风险提示**：
  - 经济衰退风险（倒挂警告）
  - 市场不确定性
  - 通胀失控风险

- **投资展望**：
  - 基于收益率曲线的投资建议
  - 资产配置指引
  - 行业轮动建议

### 3. 🌍 主要货币对
跟踪美元对主要货币的汇率：
- **USDCHF** - 美元/瑞郎（避险货币）
- **USDSGD** - 美元/新加坡元（亚太经济）
- **USDJPY** - 美元/日元（套息交易）
- **USDCNH** - 美元/人民币（中国经济）

每个货币对包含：
- 实时汇率
- 涨跌幅
- 美元强弱方向
- 汇率背景与解读

### 4. 🎯 综合评估
- **关键要点**：整合美元、利率、汇率的核心信息
- **交易指引**：
  - 防御/进取策略建议
  - 利率环境应对
  - 美元强弱策略
  - 资产配置指引

## 🔧 技术实现

### 数据收集器
**文件**：`src/collectors/forex-collector.ts`

```typescript
import { ForexCollector } from './collectors';

const collector = new ForexCollector({
  includeYields: true,      // 包含美债收益率
  includeCurrencies: true,  // 包含货币对
});

const data = await collector.collect();
```

**数据源**：Yahoo Finance（免费，无需 API Key）

### 分析器
**文件**：`src/analyzers/forex.ts`

提供深度分析功能：
- 美元指数分析（趋势、水平、影响）
- 美债收益率分析（曲线形态、波动性、风险）
- 货币对分析（汇率解读）
- 综合评估（市场情绪、交易指引）

```typescript
import { ForexAnalyzer } from './analyzers';

const analyzer = new ForexAnalyzer();
const analysis = await analyzer.analyze(forexData);
```

### 简报生成
**文件**：`src/generators/professional-briefing.ts`

新增方法：`generateForexSection()`

自动在"核心股票池表现"部分的"指数深度分析"后，"ETF表现"前插入美元版块。

## 📊 展示位置

简报结构：
```
一、核心股票池表现
  ├── 主要指数
  ├── 指数变化深度分析
  ├── 💵 美元与利率环境 ⬅️ 新增版块
  ├── ETF 表现
  └── AI 产业链股票
```

## 🚀 使用方法

### 1. 数据收集
```bash
npm run collect
```

会自动执行所有收集器，包括新增的外汇收集器（第9个收集器）。

### 2. 数据分析
```bash
npm run analyze
```

`UnifiedAnalyzer` 会自动调用 `ForexAnalyzer` 进行分析。

### 3. 生成简报
```bash
npm run generate:pro
```

生成的专业简报中会自动包含美元与利率环境版块。

### 测试外汇收集器
```bash
# 外汇数据在 npm run collect 中自动收集（Step [9/9]）
npm run collect
```

## 📈 数据更新频率

- **美元指数**：实时（市场交易时间）
- **美债收益率**：实时（市场交易时间）
- **外汇汇率**：实时（24小时交易）

## 🎓 分析逻辑

### 收益率曲线判断
```
倒挂 (Inverted): 2Y-10Y < -0.2%
  → 衰退预警，建议防御配置

平坦 (Flat): -0.2% ≤ 2Y-10Y ≤ 0.2%
  → 经济前景不明，中性观望

正常 (Normal): 0.2% < 2Y-10Y ≤ 1.0%
  → 健康经济，均衡配置

陡峭 (Steep): 2Y-10Y > 1.0%
  → 复苏信号，增加风险敞口
```

### 美元指数水平
```
强势 (Strong): DXY > 105
  → 压制大宗商品，新兴市场承压

中性 (Moderate): 95 < DXY ≤ 105
  → 均衡环境

弱势 (Weak): DXY ≤ 95
  → 利好大宗商品和跨国企业
```

### 市场情绪判断
```
Risk-Off (避险):
  - 美元走强 + 收益率曲线倒挂
  → 增持避险资产（美债、黄金）

Risk-On (风险偏好):
  - 美元走弱 + 收益率曲线陡峭
  → 增持风险资产（股票、新兴市场）
```

## 💡 投资应用示例

### 场景1：收益率曲线倒挂
**信号**：2年期-10年期利差为 -0.5%

**分析**：
- 市场预期经济衰退
- 预计美联储未来降息
- 投资者寻求长期债券避险

**建议**：
- ✅ 增持防御性板块（公用事业、必需消费品）
- ✅ 提高现金比例 20-30%
- ✅ 考虑黄金、短期国债
- ❌ 减少周期性股票敞口
- ❌ 避免高杠杆标的

### 场景2：美元指数大幅走强
**信号**：DXY 从 102 上涨至 108

**分析**：
- 美国经济相对强劲
- 或全球避险需求上升
- 压制大宗商品价格
- 新兴市场资金流出

**建议**：
- ✅ 关注纯内需企业
- ✅ 减少海外收入占比高的跨国公司
- ❌ 谨慎对待新兴市场投资
- ❌ 避免大宗商品多头

### 场景3：10年期收益率快速上升
**信号**：10年期收益率从 3.5% 升至 4.8%

**分析**：
- 通胀担忧或经济过热
- 融资成本上升
- 高估值成长股承压
- 金融股受益于利差扩大

**建议**：
- ✅ 关注金融股（银行、保险）
- ✅ 缩短债券久期
- ✅ 增加价值股配置
- ❌ 减持高估值科技股
- ❌ 避免长久期债券

## 🔍 数据准确性

所有数据来源于 **Yahoo Finance**：
- ✅ 免费、无需 API Key
- ✅ 数据更新及时（实时行情）
- ✅ 覆盖全球主要市场
- ✅ 数据质量可靠

## 📚 相关文档

- [LLM 增强分析](./LLM_ENHANCEMENT.md) - 如何用 AI 深化分析
- [配置说明](./CONFIG_TEST_REPORT.md) - 环境配置指南
- [收集器概览](./COLLECTORS_OVERVIEW.md) - 所有数据收集器说明

## 🤝 贡献

如需扩展外汇模块功能：
1. 编辑 `src/collectors/forex-collector.ts` 添加更多数据源
2. 编辑 `src/analyzers/forex.ts` 增强分析逻辑
3. 编辑 `src/generators/professional-briefing.ts` 调整展示格式

---

**更新日期**: 2026-02-02  
**版本**: v1.0.0  
**维护者**: Finance Briefing Agent Team
